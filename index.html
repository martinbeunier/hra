<html>
  <head></head>
  <body>
    <div id="game" style="border: 1px solid"></div>
    <script
      type="text/javascript"
      src="https://rawgithub.com/craftyjs/Crafty/release/dist/crafty-min.js"
    ></script>
    <script>
      // Crafty.init(300, 300, document.getElementById("game"));

      // Crafty.e("2D, Canvas, Color, Fourway, ")
      //   .attr({ x: 0, y: 0, w: 50, h: 50 })
      //   .color("#F00")
      //   .fourway(200);

      Crafty.init(1300, 700, document.getElementById("game"));

      // Vytvoření hráče
      var player = Crafty.e("2D, DOM, Color, Fourway, Collision")
        .attr({ x: 10, y: 10, w: 20, h: 20 })
        .color("red")
        .fourway(200)
        .collision();

      // Vytvoření hranice 1-nahore
      var hranice = Crafty.e("2D, DOM, Color, Collision")
        .attr({ x: 0, y: 0, w: 1300, h: 1 })
        .color("black")
        .collision()
        .onHit("Player", function (hitData) {
          // Získání hráče, který narazil na hranici
          var playerHit = hitData[0].obj;

          // Vrácení hráče na předchozí pozici před kolizí
          playerHit.x -= playerHit.dx;
          playerHit.y -= playerHit.dy;
        });

      // Vytvoření hranice 2-dole
      var hranice = Crafty.e("2D, DOM, Color, Collision")
        .attr({ x: 0, y: 700, w: 1300, h: 1 })
        .color("black")
        .collision()
        .onHit("Player", function (hitData) {
          // Získání hráče, který narazil na hranici
          var playerHit = hitData[0].obj;

          // Vrácení hráče na předchozí pozici před kolizí
          playerHit.x -= playerHit.dx;
          playerHit.y -= playerHit.dy;
        });

      // Vytvoření hranice 3-vpravo
      var hranice = Crafty.e("2D, DOM, Color, Collision")
        .attr({ x: 1300, y: 1, w: 1300, h: 1000 })
        .color("black")
        .collision()
        .onHit("Player", function (hitData) {
          // Získání hráče, který narazil na hranici
          var playerHit = hitData[0].obj;

          // Vrácení hráče na předchozí pozici před kolizí
          playerHit.x -= playerHit.dx;
          playerHit.y -= playerHit.dy;
        });

      // Vytvoření hranice 4-vlevo
      var hranice = Crafty.e("2D, DOM, Color, Collision")
        .attr({ x: 0, y: 1, w: 1, h: 1000 })
        .color("black")
        .collision()
        .onHit("Player", function (hitData) {
          // Získání hráče, který narazil na hranici
          var playerHit = hitData[0].obj;

          // Vrácení hráče na předchozí pozici před kolizí
          playerHit.x -= playerHit.dx;
          playerHit.y -= playerHit.dy;
        });

      // Přidání hráče do vrstvy s kolizemi
      player.addComponent("Player");

      // Vytvoření nepřítele
      var enemy = Crafty.e("2D, DOM, Color, Tween, Collision")
        .attr({ x: 100, y: 100, w: 50, h: 50 })
        .color("blue")
        .onHit("Player", function () {
          alert("Prohrál jsi!");
          player.destroy(); // Zničí hráče po kolizi
          location.reload();
        });

      // Náhodné pohybování nepřítele
      function moveEnemy() {
        var newX = Crafty.math.randomInt(1, 1250);
        var newY = Crafty.math.randomInt(1, 650);
        enemy.tween({ x: newX, y: newY }, 1000);
        setTimeout(moveEnemy, 1000); // Spustí pohyb nepřítele každé 2 sekundy
      }

      moveEnemy();
    </script>
  </body>
</html>
